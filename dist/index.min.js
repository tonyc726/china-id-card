/* china-id-card v1.2.1 - tonyc726 <zhujf620@gmail.com> */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0});var CHECK_CODE_MAP=["1","0","X","9","8","7","6","5","4","3","2"],WEIGHTING_MAP=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],checkBaseFormat=function(){return/(^\d{15}$)|(^\d{17}(\d|X)$)/i.test(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")},makeYearToYYYY=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:19;return/^\d{15}$/.test(e)?"".concat(e.substr(0,6)).concat(t).concat(e.substr(6,e.length-6)):null},checkProvince=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e&&/^(11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82)/.test(e)},checkBirthday=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").match(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);if(null===e)return!1;e=(new Date).getFullYear()-new Date("".concat(e[2],"-").concat(e[3],"-").concat(e[4])).getFullYear();return 0<=e&&e<=130},getCheckCode=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=(/^\d{15}$/.test(e)?makeYearToYYYY(e):e).match(/(^\d{17})/);if(null===e)return null;e=e[1].split("").reduce(function(e,t,r){return e+t*WEIGHTING_MAP[r]},0);return CHECK_CODE_MAP[e%11]},tranformEighteen=function(){var e=makeYearToYYYY(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",1<arguments.length?arguments[1]:void 0);return null===e?null:"".concat(e).concat(getCheckCode(e))},IDCard=function(){function t(e){if(_classCallCheck(this,t),!checkBaseFormat(e))return console.error("id card format is error!"),!1;this.id=15===e.length?tranformEighteen(e):e,this.isVerified=checkProvince(e)&&checkBirthday(this.id)&&getCheckCode(this.id)===this.id.substr(17,1)}return _createClass(t,[{key:"getMasterCode",value:function(){return this.isVerified?this.id.substr(0,17).toString():null}},{key:"getCheckCode",value:function(){return this.isVerified?this.id.substr(17,1).toString():null}}]),t}(),index=function(e){return new IDCard(e)};exports.default=index,exports.getCheckCode=getCheckCode,exports.tranformEighteen=tranformEighteen;
//# sourceMappingURL=index.min.js.map
